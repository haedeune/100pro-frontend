# 9. 아카이빙 일지

## 문서 목적
- `docs`에 기록된 문제정의/해결방안/권장개발순서/대규모수정사항을 기준으로, 현재 프론트 구현 상태를 구조 흐름으로 정리한다.
- 이미 구현된 범위와 남은 프론트 작업을 분리해 다음 개발 우선순위를 명확히 한다.

## 서비스 핵심 방향 (요약)
- 제품 철학: "오늘에만 집중"
- 핵심 정책:
  - 오늘 할 일은 최대 5개
  - 미래 계획 기능은 제외
  - 보관함/개인 데이터는 인증 보호 대상

## 현재 구현된 구조 흐름

### 1) 앱 진입 -> 레이아웃
- `MobileLayout` 기반 단일 모바일 셸 + 하단 탭 네비 구조로 동작
- 스플래시 화면에서는 하단 네비 숨김 처리
- 하단 네비 아이콘/라벨을 Lucide + 한글 네이밍으로 정리
  - `투두 / 캘린더 / 등록 / 보관함 / 마이`

### 2) Home(오늘 할 일) 흐름
- 상단:
  - 로고(`5늘할일`) + 오늘 날짜
- 본문:
  - 오늘 날짜의 활성 항목만 노출(보관 제외 + 로컬 날짜 기준)
  - 오늘 할 일 단일 리스트 + 체크박스 완료 토글
  - 카드 액션은 `상세보기` 유지
  - 보관/삭제는 버튼이 아닌 스와이프로 전환
    - 우->좌: 보관(보관함 이동)
    - 좌->우: 삭제
- 입력 유도:
  - `오늘 할 일 작성하러 가기 +` CTA 제공
  - 최대 5개 제한 안내 문구는 CTA 박스 바깥 보조 문구로 분리
  - 안내 옆 `?` 아이콘 클릭 시 정책 설명 모달 제공(닫기/오버레이/ESC 지원)
- 삭제 안정성:
  - 삭제 직후 3초 `되돌리기(Undo)` 토스트 제공
  - 복구 시 삭제 전 인덱스로 재삽입

### 3) 등록(Compose) 흐름
- 제목 + 상세 메모 입력 후 저장
- 저장 성공 시 Home 복귀
- 최대 5개 정책 준수
- 핫픽스 반영:
  - UUID 생성 fallback(`createTodoId`) 추가로 등록 무반응 이슈 방지
  - submit 예외 처리로 실패 시 오류 문구 노출

### 4) 상세(`/todo/:id`) 흐름
- 기존 큰 프레임형 카드 UI 제거, 플랫 구조로 단순화
- 상단 좌측: `ChevronLeft` 뒤로가기
- 상단 우측: `Pencil` 편집 진입
- 편집 모드:
  - 제목/메모 수정
  - 저장/취소 제공
  - 유효성(제목 필수, 제목 40자, 메모 500자)
- 정보 위계:
  - 제목 -> 날짜 -> 상태 문구 -> 메모 순서
  - 날짜 요일은 한국어 locale 적용
- 이탈 보호:
  - 편집 중 미저장 변경 상태에서 뒤로가기 시 확인 경고
  - 과거 날짜 항목은 수정 비활성(읽기 전용 안내)
- 복귀 동선:
  - 진입 출발 화면(state) 기반으로 뒤로가기 복귀
  - Home -> Home, 캘린더 -> 캘린더(선택 날짜/월 복원), 보관함 -> 보관함

### 5) 보관함(Archive) 흐름
- 보관된(미완료 보류) 할 일 목록 표시
- 카드 본문 클릭 시 즉시 상세보기 진입
- 더보기(`...`) 메뉴: `오늘 할일` / `삭제`
- 메뉴 UX 개선:
  - 메뉴 외부 영역 클릭/터치 시 자동 닫힘
- 정책:
  - 완료 항목은 보관하지 않음
  - `오늘 할일` 클릭 시 오늘 날짜/미완료 상태로 재지정

### 6) 일정(Schedule) 흐름
- 월간 캘린더 기반으로 전환
  - 점(dot)은 활성 todo 기준 노출
  - 미래 날짜는 회색 비활성(미리 보기 제한)
  - 점 있는 날짜를 직접 클릭했을 때만 하단 날짜별 리스트 표시
  - 월 이동 버튼 제공(이전 달 조회 가능, 미래 월 제한)
  - 기기 시간대 기준 자정 계산(타임존 안내 문구 표시)
- 날짜별 리스트:
  - 진행/완료/보관/삭제 상태 라벨 표시
  - 과거 진행중 항목은 체크로 완료 가능
  - 과거 진행중 행에 체크 완료 애니메이션 + 스와이프(보관/삭제) 지원

### 7) 로그인(My) 흐름
- 상단 브랜딩 영역 + 하단 로그인 패널 구조
- 카카오 버튼 + 이메일 로그인 폼 유지
- 상단 이모지를 커스텀 SVG로 교체
- 모바일 스크롤/여백 흔들림 이슈를 다수 보정해 탭 전환 안정성 개선

### 8) 상태/데이터 계층
- Zustand persist 기반 `todoStore`, `authStore` 운용
- Todo 데이터는 `isDone`, `archived`, `memo`, `createdAt` 중심으로 단순화
- 추가된 핵심 store 액션:
  - `insertTodo(todo, index?)` (Undo 복구용)
  - `updateTodo(id, { title?, memo? })` (상세 편집 저장용)
  - `deletedTodos` 분리 관리(삭제 이력 조회용)
- persist 확장:
  - version/merge 전략으로 기존 로컬 데이터와 신규 목업 데이터 병합

### 9) 스타일/타이포/반응형 정리
- 온글잎 폰트 적용 범위 확장
- 텍스트 가독성/행간/여백 다회 보정
- iOS safe-area 대응 및 로그인 화면 특수 스크롤 보정
- 하단 네비 기준선 흔들림(특히 MY 탭) 완화

## 현재 프론트에서 완료 및 남은 작업

### A. 인증/보안 연동 (완료)
- Kakao 인가코드(`code`)를 실제 백엔드 토큰 교환 API와 연결 (완료)
- 게스트 사용자의 로컬 `seedTodos` 데이터를 걷어내고, 로그인을 완료하는 즉시 백엔드 DB로 자동 데이터 마이그레이션 구축 (완료)
- 토큰 저장/만료/로그아웃 정책 반영 및 캘린더/보관함 라우트 보호(Redirect 정책) 점검 (완료)

### B. QA/안정화 (진행 중)
- 핵심 플로우 회귀 테스트 확장:
  - 등록 -> 상세 -> 편집 저장 -> Home 반영
  - 스와이프 보관/삭제 + Undo
  - 보관함 메뉴 외부 클릭 닫힘 및 YYYY.MM.DD 날짜 표시 추가
  - 화면별 상세 진입/복귀 동선(Home/캘린더/보관함)
  - 캘린더 월 이동/날짜 선택/미래 비활성 동작 및 React StrictMode 더블 알림 버그 수정 완료
- 브라우저/디바이스 점검:
  - iOS Safari
  - Android Chrome
  - 모바일 웹뷰

### C. 접근성/상호작용 고도화
- 스와이프 UX의 보조 접근성(키보드/스크린리더 대체 동작) 보강
- 포커스 이동/대비/터치 영역 2차 점검
- 미세 인터랙션(토스트/전환 애니메이션)의 일관성 보강

### D. 문서 동기화
- `7_권장개발순서.md`의 과거 표현(예: 상태 3단계 등)을 현재 구현과 맞게 업데이트
- PRD/SED/결정로그/백로그와 최신 구현 상태 정합성 맞추기

## 다음 작업 제안 (프론트 우선순위)
1. 권장 개발 순서 문서 업데이트 및 버그 픽스, E2E 테스트 고도화
2. C 파트 접근성 2차 보강

---
본 일지는 `docs/1`, `docs/2`, `docs/7`, `docs/8`의 내용을 기준으로 작성되었으며, 화면/상호작용 중심 프론트 구현 상태 및 `PRO-B-48` 작업 내역을 반영한다.
